@if (region(); as r) {
  <article class="page-shell section-stack mx-auto max-w-5xl">
    <nav class="breadcrumb" aria-label="Breadcrumb">
      <a routerLink="/" class="breadcrumb-link"> Home </a>
      <span class="breadcrumb-separator">/</span>
      <a routerLink="/regions" class="breadcrumb-link"> Regions </a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current" aria-current="page">{{ r.longName }}</span>
    </nav>

    <header class="page-header">
      <h1 class="page-title">{{ r.longName }}</h1>

      @if (regionSummary(); as summary) {
        <p class="page-lead">{{ summary }}</p>
      }
    </header>

    <section class="section-block" aria-labelledby="overview-heading">
      <h2 id="overview-heading" class="section-title">Region overview</h2>
      <div class="table-shell">
        <table class="table-base">
          <caption class="sr-only">
            Infrastructure details for
            {{
              r.displayName
            }}
            region.
          </caption>
          <tbody class="divide-y divide-border-soft">
            @if (r.datacenterLocation) {
              <tr>
                <th class="detail-th" scope="row">Datacenter location</th>
                <td class="detail-td">{{ r.datacenterLocation }}</td>
              </tr>
            }
            @if (r.geography) {
              <tr>
                <th class="detail-th" scope="row">Geography</th>
                <td class="detail-td">{{ r.geography }}</td>
              </tr>
            }
            @if (r.availabilityZones && r.availabilityZones.length > 0) {
              <tr>
                <th class="detail-th" scope="row">
                  Availability zones
                  <span class="ml-1 text-text-muted">({{ r.availabilityZoneCount }})</span>
                </th>
                <td class="detail-td">
                  <div class="flex flex-wrap gap-2">
                    @for (zone of r.availabilityZones; track zone) {
                      <code class="rounded bg-secondary px-2 py-1 text-xs text-text-body">
                        {{ zone }}
                      </code>
                    }
                  </div>
                </td>
              </tr>
            }
            @if (r.latitude && r.longitude) {
              <tr>
                <th class="detail-th" scope="row">Coordinates</th>
                <td class="detail-td font-mono text-sm">{{ r.latitude }}, {{ r.longitude }}</td>
              </tr>
            }
            @if (r.launchYear) {
              <tr>
                <th class="detail-th" scope="row">Launch year</th>
                <td class="detail-td">{{ r.launchYear }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </section>

    <section class="section-block" aria-labelledby="actions-heading">
      <h2 id="actions-heading" class="section-title">Actions</h2>
      <div class="flex flex-wrap gap-3">
        <a routerLink="/" [queryParams]="{ regions: r.regionId }" class="btn btn-primary">
          <span>Test latency to this region</span>
        </a>
        <a routerLink="/regions" class="btn btn-outline">
          <span>View all regions</span>
        </a>
      </div>
    </section>
  </article>
} @else {
  <article class="page-shell section-stack mx-auto max-w-5xl text-center">
    <header class="page-header items-center">
      <h1 class="page-title text-center">Region not found</h1>
      <p class="page-lead">Unable to find region details.</p>
    </header>
    <a routerLink="/regions" class="btn btn-primary"> Back to Regions </a>
  </article>
}
